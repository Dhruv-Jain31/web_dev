apiVersion: v1
kind: Pod
metadata:
  name: secret-dotfiles-pod
spec:
  containers:
    - name: dotfile-test-container
      image: nginx
      # Defines how volumes are mounted into the container
      volumeMounts:
        # Specifies a single volume mount for the container
        - mountPath: "/etc/secret-data"
          # The path inside the container where the Secret volume will be mounted
          # Files in this directory will contain the Secret's key-value pairs
          name: secret-volume
          # The name of the volume to mount (must match a volume defined in the 'volumes' section)
          readOnly: true
          # Optional: Makes the volume read-only to prevent accidental modification

        - mountPath: "/etc/config"
            # The path inside the container where the ConfigMap volume will be mounted
            # Files in this directory will contain the ConfigMap's key-value pairs
            name: configmap-volume
            # The name of the volume to mount (must match a volume defined in the 'volumes' section)

    # Defines the volumes available to the pod
    volumes:
      # Specifies a single volume for the pod
      - name: secret-volume
        # The name of the volume, referenced by the volumeMounts section
        secret:
          # Indicates that this volume is backed by a Kubernetes Secret
          secretName: my-secret
          # The name of the Secret resource (must exist in the same namespace as the pod)
          defaultMode: 0400
          # Optional: Sets file permissions (e.g., 0400 for read-only by owner)
          items:
          # Optional: Specifies which keys from the Secret to include as files
          - key: username
            # The key in the Secret to include
            path: username.txt
            # The file name in the mountPath where the key's value will be stored
          - key: password
            path: password.txt

      - name: configmap-volume
        # The name of the volume, referenced by the volumeMounts section
        configMap:
          # Indicates that this volume is backed by a Kubernetes ConfigMap
          name: my-configmap
          # The name of the ConfigMap resource (must exist in the same namespace as the pod)
          defaultMode: 0644
          # Optional: Sets file permissions (e.g., 0644 for read-write by owner, read-only by others)
          items:
          # Optional: Specifies which keys from the ConfigMap to include as files
          - key: database_url
            # The key in the ConfigMap to include
            path: app.properties
            # The file name in the mountPath where the key's value will be stored